<form [formGroup]="form" class="filter-form" (ngSubmit)="filterInventory()">
  <!-- Store Filter -->
  <label>Store</label>
  <select formControlName="store" (change)="filterInventory()">
    <option value="" disabled>All stores</option>

    @for (store of outletsStore.stores(); track $index) {
    <option [value]="store.name">{{ store.name }}</option>
    }
  </select>

  <!-- Product Filter (input + datalist) -->
  <label>Product</label>
  <input
    type="text"
    formControlName="product"
    list="productList"
    placeholder="Search product..."
    (keyup)="filterInventory()"
  />

  <datalist id="productList">
    @for (inv of inventories(); track $index) {
    <option [value]="inv.product.name"></option>
    }
  </datalist>
</form>

<div class="actions">
  <button (click)="refresh()" [disabled]="loading()">
    @if (loading()) { Refreshingâ€¦ } @else { Refresh Data }
  </button>
  <button (click)="clearFilters()" [disabled]="loading()">Clear Filters</button>
</div>
<!-- Loading Indicator -->
@if (loading()) {
<div class="loading-bar"></div>
}
<hr />

<section>
  <h3>Inventory Results</h3>

  @if (filteredInventories().length === 0) {
  <p>No inventory found.</p>
  } @else {

  <table class="inventory-table">
    <thead>
      <tr>
        <th>SN</th>
        <th>Store</th>
        <th>Product</th>
        <th>Unit</th>
        <th>Quantity</th>
      </tr>
    </thead>

    <tbody>
      @for (inv of filteredInventories(); track $index) {
      <tr>
        <td>{{ $index + 1 }}</td>
        <td>{{ inv.store.name }}</td>
        <td>{{ inv.product.name }}</td>
        <td>smallest</td>
        <td>{{ inv.quantity }}</td>
      </tr>
      }
    </tbody>
  </table>

  }
</section>
